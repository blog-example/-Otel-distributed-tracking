# 학습 목표

## 프로젝트 개요
OpenTelemetry 기반 분산 추적 학습 프로젝트

## 학습 목표

### 1. OpenTelemetry 없이 로그 추적 경험하기
- 여러 서비스에 걸친 요청 흐름을 로그만으로 추적
- 수동으로 correlationId를 전달하며 로그 연결
- 로그 기반 추적의 한계점 체감

### 2. OpenTelemetry 적용 후 개선점 체감하기
- 자동화된 Trace/Span 생성
- 서비스 간 컨텍스트 자동 전파
- 시각화된 분산 추적 (Jaeger/Zipkin)
- 로그-트레이스 연결

## 현재 구성

### 서버 구성
| 서버 | 포트 | 역할 |
|------|------|------|
| server-a | 8081 | REST API → MongoDB 저장 |
| server-b | 8082 | REST API → Kafka 발행 |
| server-bb | 8083 | Kafka 수신 → MongoDB 저장 |

### 데이터 흐름
```
[Client] → server-b → Kafka → server-bb → MongoDB
```

## API 테스트

### server-a 호출 (직접 MongoDB 저장)
```bash
curl -X POST http://localhost:8081/api/a/air-quality \
  -H "Content-Type: application/json" \
  -d '{
    "longitude": 126.9,
    "latitude": 37.5,
    "pollutants": [
      {"type": "PM25", "value": 35.5},
      {"type": "PM10", "value": 45.0}
    ],
    "deviceId": "device-001"
  }'
```

### server-b 호출 (Kafka 발행 → server-bb가 수신하여 MongoDB 저장)
```bash
curl -X POST http://localhost:8082/api/b/air-quality \
  -H "Content-Type: application/json" \
  -d '{
    "longitude": 127.0,
    "latitude": 37.6,
    "pollutants": [
      {"type": "PM25", "value": 42.0},
      {"type": "CO2", "value": 450.0}
    ],
    "deviceId": "device-002"
  }'
```
